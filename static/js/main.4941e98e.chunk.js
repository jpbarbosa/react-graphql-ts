(this["webpackJsonpreact-graphql-ts"]=this["webpackJsonpreact-graphql-ts"]||[]).push([[0],{44:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var a,c,i,r,s=n(3),j=n.n(s),d=n(31),l=n.n(d),b=n(56),u=n(57),o=n(59),O=new u.a({cache:new o.a,uri:"".concat("https://graphql-server-ts.qa.jp7.com.br","/graphql")}),h=(n(44),n(60)),v=n(20),m=n(58),x=Object(m.a)(a||(a=Object(v.a)(["\n  {\n    tasks {\n      id\n      name\n    }\n  }\n"]))),f=Object(m.a)(c||(c=Object(v.a)(["\n  mutation ($name: String!) {\n    createTask(name: $name) {\n      id\n      name\n    }\n  }\n"]))),k=Object(m.a)(i||(i=Object(v.a)(["\n  mutation ($id: ID!, $name: String!) {\n    updateTask(id: $id, name: $name) {\n      id\n      name\n    }\n  }\n"]))),p=Object(m.a)(r||(r=Object(v.a)(["\n  mutation ($id: ID!) {\n    removeTask(id: $id)\n  }\n"]))),T=n(2),g=function(){var e=Object(h.a)(x).data;return Object(T.jsxs)("header",{children:[Object(T.jsxs)("h1",{children:[Object(T.jsx)("div",{className:"title",children:"React Basic CRUD"}),Object(T.jsx)("div",{className:"subtitle",children:"With GraphQL And TypeScript"})]}),Object(T.jsx)("div",{className:"counter",children:null===e||void 0===e?void 0:e.tasks.length})]})},N=n(24),S=n(28),w=n(13),A=function(e){var t=e.activeTask,n=e.handleAction,a=Object(s.useRef)(null),c=function(e,t,n){var a=Object(s.useState)(e),c=Object(w.a)(a,2),i=c[0],r=c[1];return Object(s.useEffect)((function(){var e;null===(e=n.current)||void 0===e||e.focus()}),[n]),{formState:i,handleChange:function(e){r(Object(S.a)(Object(S.a)({},i),{},Object(N.a)({},e.target.name,e.target.value)))},handleSubmit:function(e){e.preventDefault(),t(i)}}}(t,n,a),i=c.handleChange,r=c.handleSubmit,j=c.formState;return Object(T.jsxs)("form",{onSubmit:r,children:[Object(T.jsx)("input",{type:"text",name:"name",value:j.name,onChange:i,placeholder:"Task description",ref:a}),Object(T.jsx)("input",{type:"submit"})]})},C=Object(s.createContext)({setActiveTask:function(e){return console.warn("no task provider")}}),$=function(){return Object(s.useContext)(C)},q=function(e){var t=e.children,n=Object(s.useState)(),a=Object(w.a)(n,2),c=a[0],i=a[1];return Object(T.jsx)(C.Provider,{value:{activeTask:c,setActiveTask:i},children:t})},y=n(62),D=function(){var e={refetchQueries:[{query:x}]},t=Object(y.a)(f,e),n=Object(w.a)(t,1)[0],a=Object(y.a)(k,e),c=Object(w.a)(a,1)[0],i=Object(y.a)(p,e);return{createTask:n,updateTask:c,removeTask:Object(w.a)(i,1)[0]}},E=function(){var e=$(),t=e.activeTask,n=e.setActiveTask,a=D().createTask;return Object(T.jsx)("div",{className:"new",children:t&&void 0===t.id?Object(T.jsx)(A,{handleAction:function(e){a({variables:e}),n()},activeTask:t}):Object(T.jsx)("button",{className:"bt-new",onClick:function(){return n({name:""})},children:"New Task"})})},I=function(e){var t=e.task,n=$(),a=n.activeTask,c=n.setActiveTask,i=D(),r=i.updateTask,s=i.removeTask;return Object(T.jsx)(T.Fragment,{children:a&&a.id===t.id?Object(T.jsx)(A,{activeTask:a,handleAction:function(e){r({variables:e}),c()}}):Object(T.jsxs)("div",{className:"item",children:[Object(T.jsx)("span",{onClick:function(){return c(t)},children:t.name}),Object(T.jsx)("button",{className:"bt-remove",onClick:function(){return s({variables:{id:t.id}})},children:"X"})]})})},J=function(){var e=Object(h.a)(x),t=e.loading,n=e.data,a=e.error;return t?Object(T.jsx)("div",{className:"loading",children:"Loading..."}):a?Object(T.jsxs)("div",{className:"error",children:[Object(T.jsx)("div",{children:a.message}),Object(T.jsx)("pre",{children:JSON.stringify(a.networkError,null,2)})]}):Object(T.jsx)("div",{className:"list",children:Object(T.jsx)("ul",{children:null===n||void 0===n?void 0:n.tasks.map((function(e){return Object(T.jsx)("li",{children:Object(T.jsx)(I,{task:e})},e.id)}))})})},R=function(){return Object(T.jsxs)("div",{className:"App",children:[Object(T.jsx)(g,{}),Object(T.jsx)("div",{className:"content",children:Object(T.jsxs)(q,{children:[Object(T.jsx)(E,{}),Object(T.jsx)(J,{})]})})]})};l.a.render(Object(T.jsx)(j.a.StrictMode,{children:Object(T.jsx)(b.a,{client:O,children:Object(T.jsx)(R,{})})}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.4941e98e.chunk.js.map